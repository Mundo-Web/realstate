import{R as e,r as c}from"./FilterContainer-TykbAVkI.js";import{c as q}from"./ReactAppend-GBOQKLDe.js";import{C as A}from"./CreateReactScript-Il069F1S.js";import{P as B,F as D,a as M}from"./ProductCard-ON-Z_K16.js";import"./SelectAPIFormGroup-A251JnnE.js";import{a as z}from"./arrayJoin-Fk5sgFcM.js";import{a as p}from"./axios-_sX4vCAy.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-GBzf7Cls.js";import"./CreateReactScript-Hm6EbMAE.js";import"./TippyButton-w0wM3ydO.js";const H=({minPrice:d,maxPrice:f,categories:x,tags:v,attribute_values:N,id_cat:n,tag_id:_,subCatId:g})=>{const[F,P]=c.useState([]),[a,o]=c.useState({}),[m,k]=c.useState(0),[i,b]=c.useState(1),[j,E]=c.useState(!1),w=c.useRef(!1),u=c.useRef(null);c.useEffect(()=>{const l=document.createElement("script");return l.src="js/notify.extend.min.js",l.async=!0,document.body.appendChild(l),()=>{document.body.removeChild(l)}},[]),c.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("tag");t&&o(r=>({...r,"txp.tag_id":[t]})),n&&o(r=>({...r,category_id:[n]}))},[n]),c.useEffect(()=>{b(1),h()},[a]),c.useEffect(()=>{h()},[i]),c.useEffect(()=>{g!==null&&o({...a,subcategory_id:[g]})},[]);const h=async()=>{u.current&&u.current.cancel("Operation canceled due to new request."),u.current=p.CancelToken.source();const l=[];if((a.maxPrice||a.minPrice)&&(a.maxPrice&&a.minPrice?l.push([[["precio",">=",a.minPrice],"or",[["descuento",">=",a.minPrice],"and",["descuento","<>",0]]],"and",[["precio","<=",a.maxPrice],"or",[["descuento","<=",a.maxPrice],"and",["descuento","<>",0]]]]):a.minPrice?l.push([["precio",">=",a.minPrice],"or",[["descuento",">=",a.minPrice],"and",["descuento","<>",0]]]):a.maxPrice&&l.push([["precio","<=",a.maxPrice],"or",[["descuento","<=",a.maxPrice],"and",["descuento","<>",0]]])),a["txp.tag_id"]&&a["txp.tag_id"].length>0){const t=[];a["txp.tag_id"].forEach((r,s)=>{s===0?t.push(["txp.tag_id","=",r]):t.push("or",["txp.tag_id","=",r])}),l.push(t)}for(const t in a){if(!t.startsWith("attribute-")||a[t].length===0)continue;const[,r]=t.split("-"),s=[];a[t].forEach((y,S)=>{S===0?s.push(["apv.attribute_value_id","=",y]):s.push("or",["apv.attribute_value_id","=",y])}),l.push([["a.id","=",r],"and",s])}if(a.category_id&&a.category_id.length>0){const t=[];a.category_id.forEach((r,s)=>{s===0?t.push(["categoria_id","=",r]):t.push("or",["categoria_id","=",r])}),l.push(t)}if(a.subcategory_id&&a.subcategory_id.length>0){const t=[];a.subcategory_id.forEach((r,s)=>{s===0?t.push(["subcategory_id","=",r]):t.push("or",["subcategory_id","=",r])}),l.push(t)}try{const{status:t,data:r}=await p.post("/api/products/paginate",{requireTotalCount:!0,filter:z([...l,["products.visible","=",!0]],"and"),take:12,skip:12*(i-1)},{headers:{"Content-Type":"application/json"},cancelToken:u.current.token});w.current=(r==null?void 0:r.is_proveedor)??!1,P((r==null?void 0:r.data)??[]),k((r==null?void 0:r.totalCount)??0)}catch(t){p.isCancel(t)?console.log("Request canceled",t.message):console.error(t)}},C=N.reduce((l,t)=>(l[t.attribute_id]||(l[t.attribute_id]=[]),l[t.attribute_id].push(t),l),{}),T=x.find(l=>l.id===Number(n)),R="images/img/portadacatalogo.png";return console.log(T),e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("section",{className:"flex flex-col lg:flex-row gap-3 lg:gap-10 justify-center items-center px-[5%] lg:pl-[5%] lg:pr-0 bg-[#5BE3A4]"},e.createElement("div",{className:"w-full lg:w-[55%] text-[#151515] flex flex-col justify-center items-center gap-2 md:gap-10"},e.createElement("div",{className:"w-full flex flex-col gap-5 px-0 lg:px-[5%] pt-8 lg:pt-0 xl:max-w-4xl"},e.createElement("h1",{className:"text-[#F8FCFF] font-Homie_Bold text-3xl"},"Propiedades que inspiran, experiencias que  marcan la diferencia.")),e.createElement("div",{className:"w-full flex flex-col gap-5 px-0 lg:px-[5%] pt-8 md:pt-0"},e.createElement("div",{className:"px-0 w-full z-10"},e.createElement("div",{className:"bg-white rounded-t-lg inline-block w-auto md:max-w-[388px]"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("button",{className:"px-10 py-3 text-[#009A84] font-FixelText_Semibold border-b-[2.5px] border-[#009A84] focus:outline-none tab-button flex-1",onclick:"showTab('tab1')"},"Elige unas Fechas"))),e.createElement("div",{id:"tab1",className:"flex flex-col md:flex-row py-4 px-4 tab-content bg-white justify-between items-center gap-5 rounded-b-lg md:rounded-tr-lg w-full"},e.createElement("div",{className:"w-full"},e.createElement("div",{className:"relative w-full text-left"},e.createElement("div",{className:"group"},e.createElement("div",null,e.createElement("select",{name:"departamento_id",id:"departamento_id2",className:"w-full py-3 px-5 text-text18 text-[#000929] border-0"},e.createElement("option",{value:""},"Ubicacion")))))),e.createElement("div",{className:"w-[0.5px] h-[50px] bg-[#E0DEF7] hidden md:block"}),e.createElement("div",{className:"w-full"},e.createElement("div",{className:"relative w-full text-left"},e.createElement("div",{className:"group"},e.createElement("div",null,e.createElement("select",{name:"categoria_id",id:"categoria_id2",className:"w-full py-3 px-5 text-text18 text-[#000929] border-0"},e.createElement("option",{value:""},"Categorias")))))),e.createElement("div",{className:"w-[0.5px] h-[50px] bg-[#E0DEF7] hidden md:block"}),e.createElement("div",{className:"flex justify-center items-center md:w-full"},e.createElement("div",{className:"flex flex-row-reverse 2md:flex-row justify-center items-center gap-5"},e.createElement("div",{className:"flex justify-start items-center w-full"},e.createElement("button",{id:"linkExplirarAlquileres",className:"bg-[#009A84] rounded-2xl font-FixelText_Semibold text-base text-white px-10 py-3 text-center"},e.createElement("span",{className:"flex w-full"},"Buscar"))))))),e.createElement("p",{className:"font-FixelText_Regular underline text-sm text-white "},"Propietario, anuncia tu propiedad gratis"))),e.createElement("div",{className:"w-full lg:w-[45%] "},e.createElement("div",{className:"w-full h-full flex flex-row items-center justify-center"},e.createElement("img",{src:R,className:"min-h-[400px] object-contain xl:h-full object-bottom"})))),e.createElement("form",{className:"flex flex-col lg:flex-row gap-6 w-full px-[5%] lg:px-[8%]"},e.createElement("section",{className:"flex flex-col gap-6 md:basis-full py-6"},e.createElement("div",{className:"w-full bg-white rounded-lg font-medium flex flex-row justify-between items-center px-2 py-3"},e.createElement("div",{className:"flex flex-col xl:flex-row  justify-start xl:justify-between items-start gap-2 "},e.createElement("span",{className:"font-normal text-[17px] text-[#666666] xl:ml-3"},"Mostrando ",(i-1)*12+1," - ",i*12>m?m:i*12," de ",m," resultados"),e.createElement("button",{type:"button",className:"lg:hidden text-[#006BF6]",onClick:()=>E(!0)}," Mostrar Filtros"))),e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 lg:gap-8"},F.map((l,t)=>e.createElement(B,{key:`product-${l.id}`,item:l,bgcolor:"bg-white",is_reseller:w.current}))),e.createElement("div",{className:"w-full font-medium flex flex-row justify-center items-center"},e.createElement(D,{current:i,setCurrent:b,pages:Math.ceil(m/12)}))),j&&e.createElement("div",{className:"fixed z-40 top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center max-h-[80vh] p-5",id:"modal"},e.createElement("div",{className:"z-50 flex items-center content-center justify-center absolute  p-4 bg-black rounded-full h-6 w-6",style:{top:"20px",right:"20px"}},e.createElement("button",{type:"button",onClick:()=>E(!1),className:"text-white text-md "},"X")),e.createElement("div",{className:"flex flex-col gap-4 w-full bg-white p-6 rounded-lg top-2 overflow-y-auto mt-10",style:{maxHeight:"90vh",maxWidth:"85vh"}},e.createElement(M,{setFilter:o,filter:a,minPrice:d??0,maxPrice:f??0,categories:x,tags:v,attribute_values:Object.values(C),selected_category:n,tag_id:_})))),e.createElement("section",{className:"flex flex-col justify-center items-center px-[5%] xl:px-[8%] py-14 w-full bg-[#73F7AD] mt-8 lg:mt-16"},e.createElement("div",{className:"flex flex-col max-w-xl"},e.createElement("div",{className:"flex flex-col w-full text-center gap-5 text-[#006258]"},e.createElement("h2",{className:"text-4xl font-Homie_Bold"},"¿Quieres que pongamos tu propiedad en alquiler?"),e.createElement("p",{className:"text-base font-FixelText_Regular text-[#000929]"},"Comparte aquí tu correo electrónico y te daremos más información.")),e.createElement("div",{className:"flex flex-col mt-8 w-full gap-4"},e.createElement("div",{className:"flex flex-col w-full rounded-lg"},e.createElement("form",{className:"flex flex-row gap-5 justify-end px-5 py-3.5 w-full bg-white rounded-2xl"},e.createElement("input",{placeholder:"Introduce tu correo electrónico",type:"email",id:"email",name:"email",class:"w-full px-4 py-2 text-sm font-FixelText_Regular focus:border-0 focus:ring-0 text-[#006258] placeholder:text-[#00625852] border border-transparent rounded-xl","aria-label":"Introduce tu correo electrónico",required:!0}),e.createElement("button",{type:"submit",className:"self-end px-10 py-3 text-base font-FixelText_Semibold text-center text-[#73F7AD] bg-[#009A84] rounded-lg"},"Enviar"))),e.createElement("p",{class:"text-base text-center font-FixelText_Regular text-[#000929]"},"Únete a ",e.createElement("strong",null,"10,000+")," propietarios más en nuestra comunidad inmobiliaria."))))))};A((d,f)=>{q(d).render(e.createElement(H,{...f}))});
