import{R as a,r as s}from"./FilterItem-TykbAVkI.js";import{c as D}from"./ReactAppend-aZwGg0Ed.js";import{C as H}from"./CreateReactScript-1C7acQKr.js";import{F as L,P as O,a as U}from"./ProductCard-2GolLlfQ.js";import"./SelectAPIFormGroup-9tOl0_JA.js";import{a as w}from"./axios-_sX4vCAy.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-Y7t1yPR6.js";import"./CreateReactScript--cj46Hwk.js";import"./warning-8ekefGe0.js";import"./FilterContainer-wHehw30U.js";import"./tippy-react.esm-BfaSvLhm.js";import"./TippyButton-eDjA3rCW.js";const J=(d=[],p)=>{const n=[];return d.forEach((m,b)=>{b==0?n.push(m):n.push(p,m)}),n},W=({minPrice:d,maxPrice:p,categories:n,tags:m,attribute_values:b,id_cat:f,tag_id:C,subCatId:y,textoshome:c,distritosfiltro:j,limite:k})=>{const[R,S]=s.useState([]),[t,o]=s.useState({}),[g,T]=s.useState(0),[u,v]=s.useState(1),[z,q]=s.useState(!1),N=s.useRef(!1),x=s.useRef(null),E=new URLSearchParams(window.location.search),I=E.get("fecha_llegada"),A=E.get("fecha_salida"),h=E.get("lugar"),_=E.get("cantidad_personas");s.useEffect(()=>{const i=document.createElement("script");return i.src="js/notify.extend.min.js",i.async=!0,document.body.appendChild(i),()=>{document.body.removeChild(i)}},[]),s.useEffect(()=>{const e=new URLSearchParams(window.location.search).get("tag");e&&o(r=>({...r,"txp.tag_id":[e]})),h&&o(r=>({...r,distrito_id:[h]})),_&&o(r=>({...r,precioservicio:[_]})),f&&o(r=>({...r,category_id:[f]}))},[f]),s.useEffect(()=>{v(1),P()},[t]),s.useEffect(()=>{P()},[u]),s.useEffect(()=>{y!==null&&o({...t,subcategory_id:[y]})},[]);const P=async()=>{x.current&&x.current.cancel("Operation canceled due to new request."),x.current=w.CancelToken.source();const i=[];if((t.maxPrice||t.minPrice)&&(t.maxPrice&&t.minPrice?i.push([[["precio",">=",t.minPrice],"or",[["descuento",">=",t.minPrice],"and",["descuento","<>",0]]],"and",[["precio","<=",t.maxPrice],"or",[["descuento","<=",t.maxPrice],"and",["descuento","<>",0]]]]):t.minPrice?i.push([["precio",">=",t.minPrice],"or",[["descuento",">=",t.minPrice],"and",["descuento","<>",0]]]):t.maxPrice&&i.push([["precio","<=",t.maxPrice],"or",[["descuento","<=",t.maxPrice],"and",["descuento","<>",0]]])),t["txp.tag_id"]&&t["txp.tag_id"].length>0){const e=[];t["txp.tag_id"].forEach((r,l)=>{l===0?e.push(["txp.tag_id","=",r]):e.push("or",["txp.tag_id","=",r])}),i.push(e)}if(t.distrito_id&&t.distrito_id.length>0){const e=[];t.distrito_id.forEach((r,l)=>{l===0?e.push(["distrito_id","=",r]):e.push("or",["distrito_id","=",r])}),i.push(e)}if(t.precioservicio&&t.precioservicio.length>0){const e=[];t.precioservicio.forEach((r,l)=>{l===0?e.push(["precioservicio","=",r]):e.push("or",["precioservicio","=",r])}),i.push(e)}for(const e in t){if(!e.startsWith("attribute-")||t[e].length===0)continue;const[,r]=e.split("-"),l=[];t[e].forEach((F,M)=>{M===0?l.push(["apv.attribute_value_id","=",F]):l.push("or",["apv.attribute_value_id","=",F])}),i.push([["a.id","=",r],"and",l])}if(t.category_id&&t.category_id.length>0){const e=[];t.category_id.forEach((r,l)=>{l===0?e.push(["categoria_id","=",r]):e.push("or",["categoria_id","=",r])}),i.push(e)}if(t.subcategory_id&&t.subcategory_id.length>0){const e=[];t.subcategory_id.forEach((r,l)=>{l===0?e.push(["subcategory_id","=",r]):e.push("or",["subcategory_id","=",r])}),i.push(e)}try{const{status:e,data:r}=await w.post("/api/products/paginate",{requireTotalCount:!0,filter:J([...i,["products.visible","=",!0]],"and"),take:12,skip:12*(u-1)},{headers:{"Content-Type":"application/json"},cancelToken:x.current.token});N.current=(r==null?void 0:r.is_proveedor)??!1,S((r==null?void 0:r.data)??[]),T((r==null?void 0:r.totalCount)??0)}catch(e){w.isCancel(e)?console.log("Request canceled",e.message):console.error(e)}},B=b.reduce((i,e)=>(i[e.attribute_id]||(i[e.attribute_id]=[]),i[e.attribute_id].push(e),i),{});return n.find(i=>i.id===Number(f)),a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("section",{className:"flex flex-col lg:flex-row gap-3 lg:gap-10 justify-center items-center px-[5%] lg:pl-[5%] lg:pr-0 bg-[#5BE3A4]"},a.createElement("div",{className:"w-full lg:w-[55%] text-[#151515] flex flex-col justify-center items-center gap-2 md:gap-10"},a.createElement("div",{className:"w-full flex flex-col gap-5 px-0 lg:pr-[5%] pt-8 lg:pt-0 xl:max-w-4xl"},a.createElement("h1",{className:"text-[#F8FCFF] font-Homie_Bold text-5xl"},(c==null?void 0:c.title1section)||"Propiedades que inspiran, experiencias que marcan la diferencia.")),a.createElement("div",{class:"w-full flex flex-col gap-5 px-0 lg:pr-[5%] pt-8 md:pt-0 relative"},a.createElement(L,{setFilter:o,filter:t,minPrice:d??0,maxPrice:p??0,categories:n,tags:m,attribute_values:Object.values(B),selected_category:f,tag_id:C,distritosfiltro:j,limite:k,lugar:h,cantidad:_,llegada:I,salida:A}))),a.createElement("div",{className:"w-full lg:w-[45%] "},a.createElement("div",{className:"w-full h-full flex flex-row items-center justify-center"},a.createElement("img",{src:"images/img/portadacatalogo.png",className:"h-[200px] lg:min-h-[400px] object-contain xl:h-full object-bottom"})))),a.createElement("form",{className:"flex flex-col lg:flex-row gap-6 w-full px-[5%] lg:px-[8%]"},a.createElement("section",{className:"flex flex-col gap-6 md:basis-full py-6"},a.createElement("div",{className:"w-full bg-white rounded-lg font-medium flex flex-row justify-between items-center px-2 py-3"},a.createElement("div",{className:"flex flex-col xl:flex-row  justify-start xl:justify-between items-start gap-2 "},a.createElement("span",{className:"font-normal text-[17px] text-[#666666] xl:ml-3"},"Mostrando ",(u-1)*12+1," - ",u*12>g?g:u*12," de ",g," resultados"),a.createElement("button",{type:"button",className:"lg:hidden text-[#006BF6]",onClick:()=>q(!0)}," Mostrar Filtros"))),a.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 lg:gap-8"},R.map((i,e)=>a.createElement(O,{key:`product-${i.id}`,item:i,bgcolor:"bg-white",is_reseller:N.current}))),a.createElement("div",{className:"w-full font-medium flex flex-row justify-center items-center"},a.createElement(U,{current:u,setCurrent:v,pages:Math.ceil(g/12)})))),a.createElement("section",{className:"flex flex-col justify-center items-center px-[5%] xl:px-[8%] py-14 w-full bg-[#73F7AD] mt-8 lg:mt-16"},a.createElement("div",{className:"flex flex-col max-w-xl"},a.createElement("div",{className:"flex flex-col w-full text-center gap-5 text-[#006258]"},a.createElement("h2",{className:"text-4xl font-Homie_Bold"},(c==null?void 0:c.title5section)||"Ingrese un texto"),a.createElement("p",{className:"text-base font-FixelText_Regular text-[#000929]"},(c==null?void 0:c.description5section)||"Ingrese un texto")),a.createElement("div",{className:"flex flex-col mt-8 w-full gap-4"},a.createElement("div",{className:"flex flex-col w-full rounded-lg"},a.createElement("form",{id:"subsEmail",className:"flex flex-row gap-5 justify-end px-5 py-3.5 w-full bg-white rounded-2xl"},a.createElement("input",{type:"hidden",name:"tipo",value:"Catalogo"}),a.createElement("input",{placeholder:"Introduce tu correo electrónico",type:"email",id:"email",name:"email",class:"w-full px-4 py-2 text-sm font-FixelText_Regular focus:border-0 focus:ring-0 text-[#006258] placeholder:text-[#00625852] border border-transparent rounded-xl","aria-label":"Introduce tu correo electrónico",required:!0}),a.createElement("button",{type:"submit",className:"self-end px-10 py-3 text-base font-FixelText_Semibold text-center text-[#73F7AD] bg-[#009A84] rounded-lg"},"Enviar"))),a.createElement("p",{class:"text-base text-center font-FixelText_Regular text-[#000929]"},(c==null?void 0:c.footer5section)||"Ingrese un texto"))))))};H((d,p)=>{D(d).render(a.createElement(W,{...p}))});
