import{R as e,r as i}from"./FilterContainer-TykbAVkI.js";import{c as I}from"./ReactAppend-GBOQKLDe.js";import{C as B}from"./CreateReactScript-Il069F1S.js";import{P as M,F as A,a as D}from"./ProductCard-i_x4LmnH.js";import"./SelectAPIFormGroup-A251JnnE.js";import{a as H}from"./arrayJoin-Fk5sgFcM.js";import{a as g}from"./axios-_sX4vCAy.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-GBzf7Cls.js";import"./CreateReactScript-Hm6EbMAE.js";import"./TippyButton-w0wM3ydO.js";const z=({minPrice:f,maxPrice:p,categories:x,tags:v,attribute_values:N,id_cat:o,tag_id:P,subCatId:b,textoshome:c})=>{const[F,C]=i.useState([]),[a,u]=i.useState({}),[m,k]=i.useState(0),[s,E]=i.useState(1),[j,y]=i.useState(!1),w=i.useRef(!1),d=i.useRef(null);i.useEffect(()=>{const l=document.createElement("script");return l.src="js/notify.extend.min.js",l.async=!0,document.body.appendChild(l),()=>{document.body.removeChild(l)}},[]),i.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("tag");t&&u(r=>({...r,"txp.tag_id":[t]})),o&&u(r=>({...r,category_id:[o]}))},[o]),i.useEffect(()=>{E(1),h()},[a]),i.useEffect(()=>{h()},[s]),i.useEffect(()=>{b!==null&&u({...a,subcategory_id:[b]})},[]);const h=async()=>{d.current&&d.current.cancel("Operation canceled due to new request."),d.current=g.CancelToken.source();const l=[];if((a.maxPrice||a.minPrice)&&(a.maxPrice&&a.minPrice?l.push([[["precio",">=",a.minPrice],"or",[["descuento",">=",a.minPrice],"and",["descuento","<>",0]]],"and",[["precio","<=",a.maxPrice],"or",[["descuento","<=",a.maxPrice],"and",["descuento","<>",0]]]]):a.minPrice?l.push([["precio",">=",a.minPrice],"or",[["descuento",">=",a.minPrice],"and",["descuento","<>",0]]]):a.maxPrice&&l.push([["precio","<=",a.maxPrice],"or",[["descuento","<=",a.maxPrice],"and",["descuento","<>",0]]])),a["txp.tag_id"]&&a["txp.tag_id"].length>0){const t=[];a["txp.tag_id"].forEach((r,n)=>{n===0?t.push(["txp.tag_id","=",r]):t.push("or",["txp.tag_id","=",r])}),l.push(t)}for(const t in a){if(!t.startsWith("attribute-")||a[t].length===0)continue;const[,r]=t.split("-"),n=[];a[t].forEach((_,q)=>{q===0?n.push(["apv.attribute_value_id","=",_]):n.push("or",["apv.attribute_value_id","=",_])}),l.push([["a.id","=",r],"and",n])}if(a.category_id&&a.category_id.length>0){const t=[];a.category_id.forEach((r,n)=>{n===0?t.push(["categoria_id","=",r]):t.push("or",["categoria_id","=",r])}),l.push(t)}if(a.subcategory_id&&a.subcategory_id.length>0){const t=[];a.subcategory_id.forEach((r,n)=>{n===0?t.push(["subcategory_id","=",r]):t.push("or",["subcategory_id","=",r])}),l.push(t)}try{const{status:t,data:r}=await g.post("/api/products/paginate",{requireTotalCount:!0,filter:H([...l,["products.visible","=",!0]],"and"),take:12,skip:12*(s-1)},{headers:{"Content-Type":"application/json"},cancelToken:d.current.token});w.current=(r==null?void 0:r.is_proveedor)??!1,C((r==null?void 0:r.data)??[]),k((r==null?void 0:r.totalCount)??0)}catch(t){g.isCancel(t)?console.log("Request canceled",t.message):console.error(t)}},R=N.reduce((l,t)=>(l[t.attribute_id]||(l[t.attribute_id]=[]),l[t.attribute_id].push(t),l),{}),S=x.find(l=>l.id===Number(o)),T="images/img/portadacatalogo.png";return console.log(S),e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement("section",{className:"flex flex-col lg:flex-row gap-3 lg:gap-10 justify-center items-center px-[5%] lg:pl-[5%] lg:pr-0 bg-[#5BE3A4]"},e.createElement("div",{className:"w-full lg:w-[55%] text-[#151515] flex flex-col justify-center items-center gap-2 md:gap-10"},e.createElement("div",{className:"w-full flex flex-col gap-5 px-0 lg:px-[5%] pt-8 lg:pt-0 xl:max-w-4xl"},e.createElement("h1",{className:"text-[#F8FCFF] font-Homie_Bold text-5xl lg:text-6xl"},(c==null?void 0:c.title1section)||"Propiedades que inspiran, experiencias que marcan la diferencia."))),e.createElement("div",{className:"w-full lg:w-[45%] "},e.createElement("div",{className:"w-full h-full flex flex-row items-center justify-center"},e.createElement("img",{src:T,className:"h-[200px] lg:min-h-[400px] object-contain xl:h-full object-bottom"})))),e.createElement("form",{className:"flex flex-col lg:flex-row gap-6 w-full px-[5%] lg:px-[8%]"},e.createElement("section",{className:"flex flex-col gap-6 md:basis-full py-6"},e.createElement("div",{className:"w-full bg-white rounded-lg font-medium flex flex-row justify-between items-center px-2 py-3"},e.createElement("div",{className:"flex flex-col xl:flex-row  justify-start xl:justify-between items-start gap-2 "},e.createElement("span",{className:"font-normal text-[17px] text-[#666666] xl:ml-3"},"Mostrando ",(s-1)*12+1," - ",s*12>m?m:s*12," de ",m," resultados"),e.createElement("button",{type:"button",className:"lg:hidden text-[#006BF6]",onClick:()=>y(!0)}," Mostrar Filtros"))),e.createElement("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 lg:gap-8"},F.map((l,t)=>e.createElement(M,{key:`product-${l.id}`,item:l,bgcolor:"bg-white",is_reseller:w.current}))),e.createElement("div",{className:"w-full font-medium flex flex-row justify-center items-center"},e.createElement(A,{current:s,setCurrent:E,pages:Math.ceil(m/12)}))),j&&e.createElement("div",{className:"fixed z-40 top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center max-h-[80vh] p-5",id:"modal"},e.createElement("div",{className:"z-50 flex items-center content-center justify-center absolute  p-4 bg-black rounded-full h-6 w-6",style:{top:"20px",right:"20px"}},e.createElement("button",{type:"button",onClick:()=>y(!1),className:"text-white text-md "},"X")),e.createElement("div",{className:"flex flex-col gap-4 w-full bg-white p-6 rounded-lg top-2 overflow-y-auto mt-10",style:{maxHeight:"90vh",maxWidth:"85vh"}},e.createElement(D,{setFilter:u,filter:a,minPrice:f??0,maxPrice:p??0,categories:x,tags:v,attribute_values:Object.values(R),selected_category:o,tag_id:P})))),e.createElement("section",{className:"flex flex-col justify-center items-center px-[5%] xl:px-[8%] py-14 w-full bg-[#73F7AD] mt-8 lg:mt-16"},e.createElement("div",{className:"flex flex-col max-w-xl"},e.createElement("div",{className:"flex flex-col w-full text-center gap-5 text-[#006258]"},e.createElement("h2",{className:"text-4xl font-Homie_Bold"},(c==null?void 0:c.title5section)||"Ingrese un texto"),e.createElement("p",{className:"text-base font-FixelText_Regular text-[#000929]"},(c==null?void 0:c.description5section)||"Ingrese un texto")),e.createElement("div",{className:"flex flex-col mt-8 w-full gap-4"},e.createElement("div",{className:"flex flex-col w-full rounded-lg"},e.createElement("form",{id:"subsEmail",className:"flex flex-row gap-5 justify-end px-5 py-3.5 w-full bg-white rounded-2xl"},e.createElement("input",{type:"hidden",name:"tipo",value:"Catalogo"}),e.createElement("input",{placeholder:"Introduce tu correo electrónico",type:"email",id:"email",name:"email",class:"w-full px-4 py-2 text-sm font-FixelText_Regular focus:border-0 focus:ring-0 text-[#006258] placeholder:text-[#00625852] border border-transparent rounded-xl","aria-label":"Introduce tu correo electrónico",required:!0}),e.createElement("button",{type:"submit",className:"self-end px-10 py-3 text-base font-FixelText_Semibold text-center text-[#73F7AD] bg-[#009A84] rounded-lg"},"Enviar"))),e.createElement("p",{class:"text-base text-center font-FixelText_Regular text-[#000929]"},(c==null?void 0:c.footer5section)||"Ingrese un texto"))))))};B((f,p)=>{I(f).render(e.createElement(z,{...p}))});
